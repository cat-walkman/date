<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鳥友老人ホーム</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    
        <div class="navbar">

        <nav class="nav-container">
          

        <div class="logo">
            <a href="#">鳥友園老人ホーム</a>
        </div>

            <ul class="nav-links">
                <li><a href="#home">ホーム</a></li>
                <li><a href="#room">部屋紹介</a></li>
                <li><a href="#food">食事</a></li>
                <li><a href="#setubi">設備</a></li>
                <li><a href="#taisou">体操</a></li>
                <li><a href="#inquiry" class="contact-btn">お問い合わせ</a></li>
            </ul>
        </nav>
    </div>

<div id="home" class="hero-section">
     <div class="hero-text">
        <p class="sub-text">あなたに会えてよかった<br>　　　　　　　　　を聞くために</p>
        <h2>「長い人生、<br>　　　自然と共に楽しい生活を」</h2>
    </div>
    </div>



<section id="room" class="room-info fade-in">
    <div class="container">
        <h2 class="section-title">お部屋紹介</h2>
        <div class="room-flex">
            <div class="room-text">
        <h3>自然を感じる落ち着く窓辺</h3>
        <p>
            あなたにあったお部屋を準備いたします。<br>
            6畳から10畳のお部屋で、温もりのある、<br>
            洋室を完備しております。<br>
            すべてのお部屋バリアフリーに対応し、<br>
            お耳の聞こえずらい方への配慮として、<br>
            『聞こえるん』をテレビに設置してあり<br>
            安心した環境を整えてます。
        </p>
    </div>
    

    <div class="room-image">
        <img src="AdobeStock_450479339.jpeg" alt="room">
    </div>
    </div>
    </div> 
</section>


 <section id="food" class="food-info fade-in">
    <div class="container">
        <h2 class="section-title">お食事</h2>
        <div class="food-flex">
            <div class="food-text">
        <h3>安心・安全のお食事を</h3>
        <p>
            当ホーム専属の栄養士が一人ひとりにあった<br>
            献立を考え、三食栄養価が高いお食事を提供<br>
            しています。夜食なども対応してますので、<br>
            お腹いっぱい食べれるホームになってます。<br>
        </p>
        <h4>アレルギーについて</h4>
        <p>アレルギーがある方も安心して食事できるよう<br>
            徹底的な管理を行ってます。<br>
            入居の際にお申し出ください。</p>
    </div>
    

    <div class="food-image">
        <img src="AdobeStock_457624207.jpeg" alt="room">
    </div>
    </div>
    </div>
</section>

<section id="setubi" class="setubi-info fade-in">
    <div class="container">
        <h2 class="section-title">設備紹介</h2>
        <div class="setubi-flex">
            <div class="setubi-text">
        <h3>設備豊富で家族と交流も</h3>
        <p>
            ネットワークの完備やテレビ、車椅子<br>
            24時間管理の冷暖房設備、補聴器の貸し<br>
            出し、検索や通話用パソコンも。<br>
            安心して過ごされるよう、機器やバリア<br>
            フリー製品を導入しています。<br>
            1か月に1回アンケートも行ってます。<br>
        </p>
        
    </div>
    

    <div class="setubi-image">
        <img src="AdobeStock_1339391316.png" alt="room">
    </div>
    </div>
    </div>
</section>


<section id="taisou" class="taisou-info fade-in">
    <div class="container">
        <h2 class="section-title">体操やカラオケなど</h2>
        <div class="taisou-flex">
            <div class="taisou-text">
        <h3>健康も楽しみながら！</h3>
        <p>
            介護用カラオケ機器を導入している為、
            健康体操や足腰のリハビリなどできます。
            歌って健康になれるカラオケも皆さま、
            楽しんで使用して頂いてます。
            専用の部屋を2部屋ありますので、自由に
            お使いいただけます。
            使用方法も簡単で、スタッフも熟知して
            おりますので、安心して楽しめます。
        </p>
        
    </div>
    

    <div class="setubi-image">
        <img src="AdobeStock_573855964.jpeg" alt="room">
    </div>
    </div>
    </div>
</section>

<section id="inquiry" class="inquiry-info fade-in">
    <div class="inquiry">
        <h5 class="section-title">お問い合わせ</h5>
        <div class="inquiry-text">
            <p>入居相談など専門の相談員が対応しますのでお気軽にお電話してください。</p>
        </div>
    </div>
</section>

<footer class="footer-bar">
    <div class="footer-container">
        <div class="footer-info">
            <p class="footer-tel">電話:0859-00-0000</p>
            <p class="footer-address">住所:〒683-0000 鳥取県米子市〇〇町0-0-0</p>
            
        </div>
        <div class="footer-links">
            <a href="#inquiry" class="contact-btn footer-btn">体験予約はこちらから</a>
        </div>
    </div>
</footer>

<div id="vacancy-floating-bar" class="floating-vacancy" style="display: none;">
    <div class="vacancy-content">
        <span class="vacancy-dot"></span><p class="vacancy-text">空き部屋状況:<span id="room-display">--</span>部屋</p>
    </div>
    <a href="#inquiry" class="vacancy-btn">見学予約</a>
</div>

<script> 
const targets = document.querySelectorAll('.fade-in');

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting){
                    entry.target.classList.add('is-visible');
                }
            });
        },{
            threshold: 0.3
        });

        targets.forEach(target => {
            observer.observe(target);
        });

        document.body.classList.add('no-scroll');

        setTimeout(()=> {
            document.body.classList.remove('no-scroll');
        },3300);

        async function updateVacancy() {
            try{
                const response =await fetch('room-settings.html?cache=' + new Date().getTime(),{
                    cache:"no-store"
                });
                const html = await response.text();

                const parser = new DOMParser();
                const doc = parser.parseFromString(html,'text/html');
                const adminElement = doc.getElementById('admin-room-count');
                const count = adminElement ? adminElement.textContent.trim() : "0";

                const displayElement = document.getElementById('room-display');
                const barElement = document.getElementById('vacancy-floating-bar');


              if(displayElement && barElement){
                displayElement.innerHTML = `<span class="tate-chu-yoko">${count}</span>`;
                barElement.style.display ='flex';
                setTimeout(()=> {
                    
                    barElement.classList.add('show');
                },1500);
              }

                if(count === "0"){
                    document.querySelector('.vacancy-content').innerHTML = '現在満室です';
                    document.querySelector('.vacancy-btn').textContent='資料請求'
                }
            }catch(error){
                console.error("空き状況の読み込みに失敗しました",error);
            };
            
            
        }

        window.addEventListener('load', () => {
            setTimeout(updateVacancy,1000);
        });
        

</script>

   

    
</body>
</html>